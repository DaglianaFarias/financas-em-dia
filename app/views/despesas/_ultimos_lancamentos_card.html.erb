<div class="card border-0 shadow-sm rounded-3 h-100" style="max-height: 450px;">
  <div class="card-body overflow-auto">
    <div class="mb-2">
      <h6 class="card-title d-flex align-items-center mb-1">
        <i class="fa-solid fa-list me-2 text-primary"></i>
        Últimos lançamentos para o período selecionado
      </h6>
      <small class="text-muted">Acompanhe seus gastos recentes</small>
    </div>

    <div class="d-flex justify-content-end gap-2 mb-3">
      <%= link_to "Visualizar todos", despesas_agrupadas_path, class: "btn btn-outline-secondary btn-sm" %>
      <%= link_to "Nova despesa", new_despesa_path, class: "btn btn-primary btn-sm" %>
    </div>

    <% if ultimas_despesas_lancadas.present? %>
      <table class="table table-hover mb-0 align-middle" id="tabela-ultimas-despesas">
        <thead class="bg-light text-muted small">
          <tr>
            <th class="ps-4">Descrição</th>
            <th>Valor</th>
            <th class="pe-4 text-end">Data</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <% ultimas_despesas_lancadas.each do |despesa| %>
            <tr class="small">
              <td class="ps-4"><%= despesa.descricao %></td>
              <td class="text-danger"> -
                R$ <%= number_to_currency(despesa.valor, unit: "", separator: ",", delimiter: ".", precision: 2) %>
              </td>
              <td class="pe-4 text-end"><%= formatar_data(despesa.data_gasto) %></td>
              <td>
                <div class="d-flex gap-2 justify-content-center">
                  <%= link_to edit_despesa_path(despesa), title: 'Editar', data: { bs_toggle: 'tooltip' }, class: 'text-success' do %>
                    <i class="fa-solid fa-pen-to-square icon-action"></i>
                  <% end %>
                
                  <%= link_to despesa_path(despesa), method: :delete, data: { confirm: 'Tem certeza?', bs_toggle: 'tooltip' }, title: 'Excluir', class: 'text-danger' do %>
                    <i class="fa-solid fa-trash-can icon-action"></i>
                  <% end %>
                </div>                        
              </td>                      
            </tr>
          <% end %>
        </tbody>
      </table>
    <% else %>
      <div class="px-4 py-3 text-center text-muted small">
        Nenhuma despesa cadastrada para o período.
      </div>
    <% end %>
  </div>
</div>
